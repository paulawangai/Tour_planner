<UserControl x:Class="Tour_planner.TourPlanner.UI.TourPlanner.Views.TourLogView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:viewmodels="clr-namespace:Tour_planner.TourPlanner.UI.TourPlanner.ViewModels"
             mc:Ignorable="d"
             d:DesignHeight="800" d:DesignWidth="650">
    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
        <Grid Margin="10" Background="White">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Search Bar -->
            <StackPanel Grid.Row="0" Margin="10" Orientation="Horizontal">
                <TextBox Width="300" Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}" Margin="5" />
                <Button Content="Search" Command="{Binding SearchCommand}" Margin="5" Width="100"/>
            </StackPanel>

            <!-- Form for Adding and Updating Tour Logs -->
            <StackPanel Grid.Row="1" Margin="10">
                <TextBlock Text="Add/Update Tour Log" FontWeight="Bold" FontSize="16" Margin="5"/>
                <StackPanel Orientation="Vertical" Margin="0,10,0,0">
                    <StackPanel Orientation="Horizontal" Margin="5">
                        <TextBlock Text="Date/Time:" VerticalAlignment="Center" Width="150"/>
                        <TextBox Text="{Binding EditTourLogDateTime, UpdateSourceTrigger=PropertyChanged}" Width="400"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="5">
                        <TextBlock Text="Comment:" VerticalAlignment="Center" Width="150"/>
                        <TextBox Text="{Binding EditTourLogComment, UpdateSourceTrigger=PropertyChanged}" Width="400"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="5">
                        <TextBlock Text="Difficulty:" VerticalAlignment="Center" Width="150"/>
                        <TextBox Text="{Binding EditTourLogDifficulty, UpdateSourceTrigger=PropertyChanged}" Width="400"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="5">
                        <TextBlock Text="Total Distance (km):" VerticalAlignment="Center" Width="150"/>
                        <TextBox Text="{Binding EditTourLogTotalDistance, UpdateSourceTrigger=PropertyChanged}" Width="400"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="5">
                        <TextBlock Text="Total Time (hrs):" VerticalAlignment="Center" Width="150"/>
                        <TextBox Text="{Binding EditTourLogTotalTime, UpdateSourceTrigger=PropertyChanged}" Width="400"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="5">
                        <TextBlock Text="Rating:" VerticalAlignment="Center" Width="150"/>
                        <TextBox Text="{Binding EditTourLogRating, UpdateSourceTrigger=PropertyChanged}" Width="400"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="5">
                        <TextBlock Text="Tour:" VerticalAlignment="Center" Width="150"/>
                        <ComboBox ItemsSource="{Binding Tours}" DisplayMemberPath="TourName" SelectedItem="{Binding EditTour}" Width="400"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="10">
                        <Button Content="Add Tour Log" Command="{Binding AddTourLogCommand}" Margin="5" Width="150"/>
                        <Button Content="Update Tour Log" Command="{Binding UpdateTourLogCommand}" Margin="5" Width="150"/>
                        <Button Content="Delete Tour Log" Command="{Binding DeleteTourLogCommand}" Margin="5" Width="150"/>
                    </StackPanel>
                </StackPanel>
            </StackPanel>

            <!-- ListView for Tour Logs -->
            <ListView ItemsSource="{Binding TourLogs}" SelectedItem="{Binding SelectedTourLog}" Grid.Row="2" Margin="5" Height="400">
                <ListView.View>
                    <GridView>
                        <GridViewColumn Header="Date/Time" DisplayMemberBinding="{Binding DateTime}" Width="150"/>
                        <GridViewColumn Header="Comment" DisplayMemberBinding="{Binding Comment}" Width="250"/>
                        <GridViewColumn Header="Difficulty" DisplayMemberBinding="{Binding Difficulty}" Width="150"/>
                        <GridViewColumn Header="Distance (km)" DisplayMemberBinding="{Binding TotalDistance}" Width="150"/>
                        <GridViewColumn Header="Total Time (hrs)" DisplayMemberBinding="{Binding TotalTime}" Width="150"/>
                        <GridViewColumn Header="Rating" DisplayMemberBinding="{Binding Rating}" Width="150"/>
                        <GridViewColumn Header="Tour Name" DisplayMemberBinding="{Binding Tour.TourName}" Width="150"/>
                    </GridView>
                </ListView.View>
            </ListView>
        </Grid>
    </ScrollViewer>
</UserControl>
